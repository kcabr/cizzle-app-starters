import{r as h,j as e,s as b}from"./client-Bm6Vdnqp.js";import{u as p}from"./useQuery-Bm7vSMYN.js";import{C as y,A as f}from"./CustomButtonLink-DOih7mnW.js";import"./utils-km2FGkQ4.js";function j({onSearch:c,initialQuery:r="",isLoading:t=!1}){const[a,o]=h.useState(r),n=d=>{d.preventDefault(),a.trim()&&c(a.trim())};return e.jsx("form",{onSubmit:n,className:"mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-grow",children:e.jsx("input",{type:"text",value:a,onChange:d=>o(d.target.value),placeholder:"Search for news articles...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-800 dark:text-white",required:!0})}),e.jsxs("button",{type:"submit",disabled:t||!a.trim(),className:"inline-flex items-center justify-center px-5 py-2 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[t?e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,"Search"]})]})})}const S=function(){const[r,t]=h.useState({query:"",page:1,pageSize:9}),{data:a,isLoading:o,isError:n,error:d,isFetching:m}=p({queryKey:["newsSearch",r],queryFn:()=>b({data:r}),enabled:!!r.query,gcTime:1e3*60*5}),u=s=>{t(l=>({...l,query:s,page:1}))},x=s=>{t(l=>({...l,page:s})),window.scrollTo({top:0,behavior:"smooth"})},i=a?.totalResults||0,g=a?.articles||[];return e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(y,{to:"/news",variant:"text",color:"primary",className:"mb-2",startIcon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),children:"Back to headlines"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Search News Articles"}),e.jsx(j,{onSearch:u,initialQuery:r.query,isLoading:m}),o&&r.query?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):n?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4 text-red-800 dark:text-red-200 mb-4",children:e.jsxs("p",{children:["Error: ",d?.message||"Failed to load articles"]})}):a&&r.query?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Found ",i,' results for "',r.query,'"']}),m&&e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-indigo-500 border-t-transparent rounded-full"})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 mb-6 pt-4"}),g.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((s,l)=>e.jsx("div",{children:e.jsx(f,{article:s})},`${s.url}-${l}`))}),i>r.pageSize&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("nav",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>x(Math.max(1,r.page-1)),disabled:r.page===1,className:"mr-2 px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Page ",r.page," of"," ",Math.ceil(i/r.pageSize)]}),e.jsx("button",{onClick:()=>x(Math.min(Math.ceil(i/r.pageSize),r.page+1)),disabled:r.page>=Math.ceil(i/r.pageSize),className:"ml-2 px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"No articles found"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Try a different search term"})]})]}):e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-8 text-center rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Search for news articles"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter a search term above to find articles from around the world"})]})]})})};export{S as component};
