import{v as b,w as g,r as o,W as w,j as e,L as m,X as v}from"./client-Bm6Vdnqp.js";import{C as k,a as C,d as S}from"./card-DtHpFZbu.js";import{B as l}from"./button-1p6NbWQA.js";import{A as M,a as _,C as D}from"./alert-CgOl55GX.js";import{c as i}from"./createLucideIcon-BdBzZ_PZ.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],h=i("ArrowRight",L);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],A=i("BadgeCheck",R);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],E=i("CalendarDays",B);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],u=i("CreditCard",H);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],p=i("House",z);function I(){const{isSignedIn:t}=b(),{refetch:f}=g(),[d,a]=o.useState(!0),[x,r]=o.useState(null),[n,y]=o.useState(null);o.useEffect(()=>{const s=(typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams("")).get("session_id");s&&t?j(s):t?(r("No subscription information found"),a(!1)):(r("You need to be signed in to view subscription details"),a(!1))},[t]);const j=async c=>{try{const s=await w({data:{sessionId:c}});y(s),f()}catch(s){console.error("Error fetching subscription details:",s),r("Could not load subscription details")}finally{a(!1)}},N=async()=>{if(!t){r("You must be logged in to manage your subscription");return}try{a(!0),await v.createPortal()}catch(c){console.error("Error creating portal session:",c),r("Could not access billing portal"),a(!1)}};return d?e.jsxs("div",{className:"container py-16 mx-auto text-center",children:[e.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-5 text-muted-foreground",children:"Loading your subscription details..."})]}):x?e.jsxs("div",{className:"container py-12 mx-auto max-w-md",children:[e.jsx(M,{variant:"destructive",className:"mb-6",children:e.jsx(_,{className:"text-center py-2",children:x})}),e.jsx(l,{asChild:!0,className:"w-full",children:e.jsxs(m,{to:"/",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Return to Home"]})})]}):e.jsx("div",{className:"container py-16 mx-auto max-w-2xl",children:e.jsxs(k,{className:"overflow-hidden shadow-lg border-2 border-primary/10",children:[e.jsxs(C,{className:"bg-primary text-primary-foreground text-center py-10",children:[e.jsx("div",{className:"mx-auto rounded-full bg-primary-foreground/20 p-4 w-24 h-24 flex items-center justify-center mb-5",children:e.jsx(D,{className:"h-14 w-14"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Payment Successful!"}),e.jsx("p",{className:"text-primary-foreground/80 mt-2",children:"Your subscription has been activated"})]}),e.jsx(S,{className:"pt-8 pb-10 px-8",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center rounded-full border border-primary/20 px-3 py-1 text-sm bg-primary/5 mb-3",children:[e.jsx(A,{className:"mr-1 h-4 w-4 text-primary"}),e.jsx("span",{children:"Active Subscription"})]}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Thank you for subscribing!"}),e.jsxs("p",{className:"text-muted-foreground",children:["You now have access to all premium features included in the"," ",e.jsx("span",{className:"font-medium text-primary",children:n.planName})]})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-5 mb-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-5 w-5 text-muted-foreground mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Next billing date"}),e.jsx("p",{className:"font-medium",children:n.nextBillingDate})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"h-5 w-5 text-muted-foreground mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subscription ID"}),e.jsx("p",{className:"font-mono text-sm",children:n.subscriptionId})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h3",{className:"font-medium",children:"What's next?"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(h,{className:"h-5 w-5 text-primary mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Explore your new premium features in the dashboard"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(h,{className:"h-5 w-5 text-primary mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"You can manage your subscription details at any time"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(h,{className:"h-5 w-5 text-primary mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Need help? Contact our support team for assistance"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[e.jsx(l,{asChild:!0,variant:"outline",className:"sm:flex-1",children:e.jsxs(m,{to:"/",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Return to Dashboard"]})}),e.jsx(l,{onClick:N,disabled:d,className:"sm:flex-1",children:d?"Loading...":e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Manage Billing"]})})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Subscription information not available."}),e.jsx(l,{asChild:!0,className:"mt-4",children:e.jsx(m,{to:"/",children:"Return to Home"})})]})})]})})}const F=function(){return e.jsx(I,{})};export{F as component};
