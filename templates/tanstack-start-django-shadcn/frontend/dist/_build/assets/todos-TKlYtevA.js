import{p as s,q as o,r as x,t as E,j as e,V as r}from"./client-Bm6Vdnqp.js";import{u as k}from"./useQuery-Bm7vSMYN.js";import{u as c,a as l}from"./useMutation-BIRUDehh.js";import{C as T,a as g,b as _,d as j}from"./card-DtHpFZbu.js";import{I as q}from"./input-DhjTea2T.js";import{T as w}from"./textarea-BvKsEWrI.js";import{L as v}from"./label-Db2qutF5.js";import{C as D}from"./checkbox-BwXPwVVv.js";import{A as f}from"./AccentButton-1guupTMB.js";import"./utils-km2FGkQ4.js";import"./button-1p6NbWQA.js";import"./check-B6B75W4y.js";import"./createLucideIcon-BdBzZ_PZ.js";const L=o("src_utils_todos_ts--getTodos_createServerFn_handler","/_server"),M=s({method:"GET"}).handler(L),P=o("src_utils_todos_ts--getTodoById_createServerFn_handler","/_server");s({method:"GET"}).handler(P);const $=o("src_utils_todos_ts--createTodo_createServerFn_handler","/_server"),Q=s({method:"POST"}).handler($),I=o("src_utils_todos_ts--updateTodo_createServerFn_handler","/_server"),K=s({method:"POST"}).handler(I),O=o("src_utils_todos_ts--deleteTodo_createServerFn_handler","/_server"),B=s({method:"POST"}).handler(O),re=function(){const[d,u]=x.useState(""),[m,h]=x.useState(""),a=E(),{data:n,isLoading:y,error:p}=k({queryKey:["todos"],queryFn:()=>M()}),i=c({mutationFn:l(Q),onSuccess:()=>{a.invalidateQueries({queryKey:["todos"]}),u(""),h(""),r.success("Todo created successfully!")},onError:t=>{r.error(`Failed to create todo: ${t.message}`)}}),S=c({mutationFn:l(K),onSuccess:()=>{a.invalidateQueries({queryKey:["todos"]}),r.success("Todo updated successfully!")},onError:t=>{r.error(`Failed to update todo: ${t.message}`)}}),C=c({mutationFn:l(B),onSuccess:()=>{a.invalidateQueries({queryKey:["todos"]}),r.success("Todo deleted successfully!")},onError:t=>{r.error(`Failed to delete todo: ${t.message}`)}}),F=t=>{t.preventDefault(),d.trim()&&i.mutate({data:{title:d,description:m}})},N=t=>{S.mutate({data:{id:t.id,title:t.title,description:t.description||void 0,completed:!t.completed}})},b=t=>{C.mutate({data:t})};return y?e.jsx("div",{className:"container py-10 flex justify-center",children:"Loading todos..."}):p?e.jsxs("div",{className:"container py-10 text-red-500",children:["Error loading todos: ",p.message]}):e.jsxs("div",{className:"container py-10",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold leading-tight tracking-tight text-foreground",children:"Todo List"}),e.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Manage your todos with Prisma ORM and Supabase"})]}),e.jsxs("main",{children:[e.jsxs(T,{className:"mb-8",children:[e.jsx(g,{children:e.jsx(_,{children:"Create New Todo"})}),e.jsx(j,{children:e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"title",children:"Title"}),e.jsx(q,{id:"title",value:d,onChange:t=>u(t.target.value),placeholder:"Enter todo title",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"description",children:"Description"}),e.jsx(w,{id:"description",value:m,onChange:t=>h(t.target.value),placeholder:"Enter todo description (optional)",rows:3})]}),e.jsx(f,{type:"submit",disabled:i.isPending,isHighlighted:!0,children:i.isPending?"Creating...":"Create Todo"})]})})]}),e.jsxs(T,{children:[e.jsx(g,{children:e.jsx(_,{children:"Your Todos"})}),e.jsx(j,{children:n&&n.length>0?e.jsx("ul",{className:"space-y-4",children:n.map(t=>e.jsxs("li",{className:"flex items-start justify-between space-x-2 pb-4 border-b",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(D,{id:`todo-${t.id}`,checked:t.completed,onCheckedChange:()=>N(t)}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`todo-${t.id}`,className:`font-medium cursor-pointer ${t.completed?"line-through text-muted-foreground":"text-foreground"}`,children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]})]}),e.jsx(f,{size:"sm",onClick:()=>b(t.id),className:"bg-red-100 text-red-800 hover:bg-red-200 dark:bg-red-900 dark:text-red-100 dark:hover:bg-red-800",children:"Delete"})]},t.id))}):e.jsx("p",{className:"text-muted-foreground",children:"No todos yet. Create one above!"})})]})]})]})};export{re as component};
